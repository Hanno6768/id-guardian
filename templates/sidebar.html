<!-- Mobile topbar only shows on phones -->
<nav class="mobile-top-bar d-lg-none">
    <div class="container-fluid">

        <button class="sidebar-toggle" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu">
            <i class='bx bx-menu'></i>
        </button>

        <div class="mobile-brand">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="SudaGuardian Logo" class="mobile-logo">
            <span>SudaGuardian</span>
        </div>

        <div class="mobile-user">
            <span class="user-badge">{{ current_user.full_name[:1] }}</span>
        </div>
    </div>
</nav>

<!-- sidebar -->
<aside class="sidebar offcanvas-lg offcanvas-start" tabindex="-1" id="sidebarMenu">

    <!-- header -->
    <div class="sidebar-header">
        <div class="sidebar-brand">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="SudaGuardian Logo" class="sidebar-logo">
            <div class="sidebar-brand-text">
                <span class="brand-name">SudaGuardian</span>
                <span class="brand-subtitle">GOV.SD</span>
            </div>
        </div>
        <button class="btn-close d-lg-none" type="button" data-bs-dismiss="offcanvas"></button>
    </div>

    <!-- user profile -->
    <div class="sidebar-user">

        <div class="user-avatar">
            <span>{{ current_user.username[:1].upper() }}</span>
        </div>

        <div class="user-info">
            <h6 class="username">{{ current_user.username }}</h6>
            <span class="user-role">
                {% if current_user.role == 'admin' %}
                <i class='bx bx-shield-check'></i> Administrator
                {% elif current_user.role == 'reviewer' %}
                <i class='bx bx-check-circle'></i> Document Reviewer
                {% else %}
                <i class='bx bx-user'></i> Citizen
                {% endif %}
            </span>
        </div>
    </div>

    <!-- Navigation -->
    <div class="sidebar-menu">
        <div class="menu-section">
            <span class="menu-section-title">Main</span>

            <a href="/user_dashboard" class="menu-item active">
                <i class='bx bx-home-alt'></i>
                <span>Dashboard</span>
            </a>

            <a href="#" class="menu-item">
                <i class='bx bx-folder'></i>
                <span>My Documents</span>
                <span class="menu-badge">{{ document_count }}</span>
            </a>

            <a href="#" class="menu-item">
                <i class='bx bx-upload'></i>
                <span>Upload Document</span>
            </a>

            <a href="#" class="menu-item">
                <i class='bx bx-qr'></i>
                <span>QR Codes</span>
            </a>

            <a href="#" class="menu-item">
                <i class='bx bx-history'></i>
                <span>History</span>
            </a>

        </div>

        <!-- Reviewer only -->
        {% if current_user.role == 'reviewer' %}

        <div class="menu-section">
            <span class="menu-section-title">Reviewer Tools</span>

            <a href="#" class="menu-item">
                <i class='bx bx-task'></i>
                <span>Review Queue</span>
                <span class="menu-badge badge-warning">{{ pending_reviews_count }}</span>
            </a>

            <a href="#" class="menu-item">
                <i class='bx bx-check-square'></i>
                <span>Reviewed Documents</span>
            </a>

        </div>

        {% endif %}

        <!-- Admin only -->
        {% if current_user.role == 'admin' %}
        <div class="menu-section">
            <span class="menu-section-title">Administration</span>

            <a href="#" class="menu-item">
                <i class='bx bx-shield-alt-2'></i>
                <span>Admin Dashboard</span>
            </a>

            <a href="#" class="menu-item">
                <i class='bx bx-group'></i>
                <span>Manage Users</span>
                <span class="menu-badge">{{ total_users }}</span>
            </a>

            <a href="#" class="menu-item">
                <i class='bx bx-buildings'></i>
                <span>Manage Agencies</span>
            </a>

            <a href="#" class="menu-item">
                <i class='bx bx-list-ul'></i>
                <span>System Logs</span>
            </a>

            <a href="#" class="menu-item">
                <i class='bx bx-cog'></i>
                <span>System Settings</span>
            </a>
        </div>
        {% endif %}

        <!-- account section -->
        <div class="menu-section">
            <span class="menu-section-title">Account</span>

            <a href="/profile" class="menu-item">
                <i class='bx bx-user-circle'></i>
                <span>My Profile</span>
            </a>

            <a href="/settings" class="menu-item">
                <i class='bx bx-slider-alt'></i>
                <span>Settings</span>
            </a>

            <a href="/notifications" class="menu-item">
                <i class='bx bx-bell'></i>
                <span>Notifications</span>
                <span class="menu-badge badge-danger">{{ unread_notifications }}</span>
            </a>

            <a href="/help" class="menu-item">
                <i class='bx bx-help-circle'></i>
                <span>Help & Support</span>
            </a>
        </div>
    </div>

    <!-- sidebar footer -->
    <div class="sidebar-footer">

        <a href="/logout" class="btn-logout">
            <i class='bx bx-log-out'></i>
            <span>Logout</span>
        </a>
        <div class="sidebar-version">
            <small>Version v0.0.0</small>
        </div>
    </div>

</aside>